<!-- $theme: default -->

git勉強会
==
###### モダンなエンジニアになろう '18
---

## 第１部
gitとは
==
---

なぜgit
==
- efilesで作業してると、よくこんなことになりませんか・・・
![center](whichislatest.jpg) 
- どれが顧客提出版？多分これかな。えっ違うの！？
- この項目を入れたのは誰だぁ～～！
- 古いファイルをoldに入れたら怒られた(´・ω・`)
- 数行しか変えてないのに別名で保存するのか・・容量が・・
# いらいらするぜ。。もう21世紀なのに。
---

gitとは
==
### あるプロジェクトを構成する大量のファイルを、複数人が、効率よく利用できるようにしたシステム。
- またの名を、
	### 分散バージョン管理システム（dCVS）
- 要するに、
	- 誰が、
	- いつ、
	- どのファイルに、
	- どんな変更をしたか
- という**履歴**を管理する。
---

ちなみに
==
##### Linuxカーネルのメンテナンスのために、リーナス御大ご自身が開発
- カーネルのメンテナーは、世界に数万人いる。
	- 一週間で2万箇所以上の変更が入り、1000個のファイルが変更される。
- 4万人がefilesのようなところでメンテナンスしてたらLinuxの今の発展はなかったでしょう・・・
- 名前の由来は、3文字で、言いやすくて、まだ使われていないものなら何でもよかったとのこと。
---

gitの使い方（詳細はのちほど）
==
- gitはディレクトリ内のファイルを管理する。
- どこかのディレクトリに移動して、
	```
    $ git init
    ```
    と打つと、gitが履歴を管理し始める。
- ファイルを編集し終えたら「コミット」する（後述）。ゲームでいうところのセーブみたいなもの。
- コミットは、好きなタイミングでいくらでも出来る。
- コミットには、誰が、いつ、何を変更したかが記録される。
- いろいろ触っててわけわからんくなったら、好きなコミットからやり直せる。
---

リポジトリとは
==
### ファイルの変更履歴（＝コミット）が保管されている場所のこと
- ディレクトリでgit initすると、そこに「リポジトリ」ができる。
- git initを実行したディレクトリのことと思ってだいたいOK
	- 厳密にはちょっと違いますよ。
- 自分の作業マシンにあるリポジトリのことを**ローカルリポジトリ**という

---

リモートリポジトリ
==
### 自分の作業内容（＝リポジトリ）を他の人に展開するために、ネットワーク上のサーバにあるリポジトリのこと
- 要するにみんなのコミットが集まってるところ。
	- gitは他の人と協力して使って真価を発揮する。
- 最も有名なリモートリポジトリが、**github**
![](octcat_original.jpg)
	###### monarisaちゃんかわいいい
- 他に、**gitlab**、**bitbucket** などがある。gitlabはLinuxにインストールしてLAN内で使うことも可能。
---

github紹介
==
### リモートリポジトリのデファクトスタンダード、オープンソースの聖地
- よく聞くオープンソースのプロジェクトはだいたいここで開発されている。
	- microsoftによる買収で、それを嫌ったプロジェクトが大量に流出もしてるみたい
- webブラウザで利用できる。
- 無料で利用可能。ただし無料アカウントだと、リポジトリは公開される。
	- 対抗サービスのgitlabやbitbuckuetは、無料アカウントでも非公開リポジトリを利用可能。 
---

github紹介
==
### チームでの開発をサポートする強力な機能がある
##### pull request 
- 自分の変更を提示し、他の人の承認を得る機能（後述）
##### issue
- 問題を話しあう掲示板的なもの
##### project
- カンバンによるタスク管理
##### wiki
- その名の通りwiki
##### gist
- コードスニペット。よく使うコードやメモなどを書いておける。

---

gitここに注意
==
### ファイルの差分が取れるのは、テキストファイルのみ
- 画像とかバイナリは差分が取れないのでgithubの強力なレビュー機能が使えない。
	- ドキュメント用の写真などをリポジトリに置くのはOK。	 
- エクセルとかパワポなどのファイルはgit配下に置くと嫌われる。
	- markdown（後述）やxdiagなどのテキストベースに移行しよう！
### 履歴は原則、消してはいけない
- 履歴を残すためのシステムなので、履歴の削除はしてはいけない。
- 間違ってコミット〜リモートにアップした場合は、削除ではなく、修正をかけること。
- 履歴の削除はできるが、オープンソースのプロジェクトで他人の履歴を消したりすると処刑されます。
---

ここまでのまとめ
==
### gitとは、ディレクトリ内のファイルについて、誰が、いつ、どこを変更したのかの履歴を取るシステム
- gitが履歴を格納しているところをリポジトリという。
	- 自分のマシン内のリポジトリが、ローカルリポジトリ
	- 自分のリポジトリを公開して他人と共有する場所が、リモートリポジトリ
- 最も有名なリモートリポジトリがgithub
	- オープンソースなら無料で利用可能。課金することで、非公開リポジトリを使用できる。
- gitで扱うファイルはテキストファイルのみ。
	- バイナリファイルは差分が取れないため、画像など以外は極力テキスト化を心がける。
---

git詳細
==
### gitは、サーバ・クライアントモデル
- 自分のマシンで動くgitコマンドがクライアント
- リモートリポジトリがサーバ
### gitコマンドは、一般的なOSには標準では入っていない
- amazon linux とかGCP cloudshellには標準搭載
### gitクライアントには、GUIもある。
- sourcetree、github for mac/windowsなどなど
- pycharmやVScodeやatomなどのモダンなエディタからも使える
- クライアントは好みで選んでOK。
	> 個人的にはgitコマンドが一番使いやすいと思う。
---

gitの始め方
==
### 大きく2通りの始め方がある
#### git init
- ディレクトリをgit管理下にするコマンド
- ローカルから始めるならこちら
- リモートリポジトリを追加する作業が別途必要
#### git clone（クローン）
- リモートリポジトリからリポジトリをコピーするコマンド
- すでに始まっているプロジェクトに参加するならこちら
- リモートリポジトリの設定作業が不要なので、新しくプロジェクトを開始するときもこちらからがおすすめ
---


コミット
==
## gitに履歴を刻み込むこと。
- ゲームで言うところの**セーブ**
- ファイルを保存しただけではコミットはされない。明示的にコミットをする必要がある。
- コミットする際には、必ずコミットメッセージを付与する必要がある（書き方は自由）
- コミットのタイミングは自由だが、１つのコミットには、1種類の変更だけを含めるべき。
	- バグを改修したついでにドキュメントの誤字を修正しても、コミットにはどちらかのみを含めるべき。
	- コミットはあとで戻るときの道標になるので、2つ以上のことを含めると面倒くさいことになる。
---

コミット詳細
==
- 変更したファイルはいきなりはコミット出来ない。
- インデックスと呼ばれるエリアに入っているファイルのみ、コミットすることができる。
- インデックスがあることで、更新したファイルのうち、コミットに含めるものとそうでないものを分けることができる。

![60% center](gitstructure.jpg)
###### http ://hamamuratakuo.blog61.fc2.com/blog-entry-1084.html
---


プッシュ
==
## 自分のコミットをリモートリポジトリに登録すること
- ゲームで言うところの、**クラウドにデータを保存**
- 自分の作業内容をプロジェクトメンバーに伝えるために使う。
- 自分が招待されたリポジトリに対してのみ実施できる
	- そうでないと全然関係ない人に勝手にコードを変えられてしまうので。
- コミット何回分でも1度でプッシュできる。
- ミスした状態でプッシュすると修正が大変なので、プッシュ前は一呼吸置いて内容を確認すること。
---

プル
==
## リモートリポジトリをローカルに取り込むこと
- ゲームで言うところの、**クラウドからデータを取り込み**
- 他人の変更を取り込む。毎朝作業前に行うのが理想。
	- プルしない状態でローカルで変更をかけてしまうと面倒くさいことになることもある。
- クローンと違い、プロジェクトをコピーするのには使えない。あくまで変更を取り込むのに使う。
- プル必要派とプル不要派で戦争が勃発することがある。私は「別にプルでいい派」。
---


ブランチ
==
## リポジトリのパラレルワールドを作ること
- ある時点のコミットを始点に、リポジトリを枝分かれさせることができる。
- １つのプロジェクトに対し複数の変更作業を同時に行えるようになる。
	- メンバー１がバグ改修担当、メンバー２が機能追加担当など。
	- ブランチがないと、複数の作業のコミットが混在して混沌としてしまう。
![75%](branch.png)
###### https ://backlog.com/ja/git-tutorial/stepup/stepup1_2.html
---

マージ
==
## ブランチを統合すること
- パラレルワールドでそれぞれの作業を終えたら、ブランチをマージして作業内容を統合する。
- ブランチ作成→作業→マージを繰り返して、プロジェクトは成長していく。

![75%](branch.png)
###### https ://backlog.com/ja/git-tutorial/stepup/stepup1_2.html
---

コンフリクト
==
## 変更箇所の重複している２つのブランチをマージしたとき、どっちを採用するか聞かれること
- ２つのブランチ間で、同じ箇所に異なる変更がされていた場合、gitにはどっちを採用していいのかわからないので質問される。
- gitでも最も恐れられる状態の一つ
- コンフリクトの例
```
Hello
<<<<<<< HEAD
konbanwa
=======
sayounara
>>>>>>> third
```

- konbanwaかsayounaraのどっちを採用するか聞かれている。
	- << == >> の行はgitが追加したもの
- どちらかを選択、あるいはどちらも採用してコミットすればOK
---

gitflow
==
## ブランチ運用を効率化するためのプラグイン
- ブランチは数に制限がなく、命名も自由なため、チームで運用ルールを明確にしておかないと混沌状態になる。
	- efilesのファイル名と同じ状態になってしまう。
- Vincent Driessenという人が、混乱しにくい効率よいブランチ運用のモデルとして"A successful Git branching model"を提唱し、それをgitで簡単に扱えるようにしたプラグインがgitflow 
- リポジトリに関連付けはされない。ブランチの命名ルールとマージ先ブランチを制限しているだけ。途中でgitflowの運用を止めても、gitflowを使わずにマージしても問題ない。
---

gitflow詳細
==
## gitflowでは、以下のブランチしか使えない。
#### master
- 顧客に引き渡した最新版が置かれるブランチ。masterの直接改変は許されない。
#### develop
- masterブランチのコピーで、featureブランチの起点となる。
#### feature
- 機能追加など、一般的な作業を行うブランチ。feature/xxxの書式さえ守れば命名は自由
#### release
- リリース準備ブランチ。リリース品の最終確認のあと、masterにマージされる。
---

A successful Git branching model
==
![44%](gitflow.png)

---

おまけ
==
##### markdownとMarp

---
markdownとは
==
## テキストマークアップ言語の一種。簡単な記法でテキストを修飾できる
- 見出し、リスト、引用などの装飾をすべてテキストだけで行える。
- wordなどと違いテキスト要素しか含まないので
	- gitで差分が取れる。
	- テキストエディタでも普通に見れる。
- githubのREADMEはこの記法で書く
- PDF化、HTML化なども簡単にできる。
- 一般的なIDE、VScode、atomなどのエディタでサポートされ、webブラウザで動くサービスもある。
- アンチword派から絶大な人気を誇る。これでwordを駆逐しましょう。
---

Marpとは
==
## markdownでスライドのかけるエディタ
- speeeのエンジニア服部が、自分の欲しいスライドエディタがなかったという理由で開発
- PDFにしか変換できないものの、スムーズにスライドが作成できて超快適
- このスライドもMarpで作成しました

---

markdown & Marpのデモ
==
## かんたんにデモしてみます

---

## 第２部
gitハンズオン
==

---
